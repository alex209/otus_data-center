# Лабораторная №1

## Основы проектирования сети

### Цель задания

Собрать схему CLOS.

Распределить адресное пространство.

### Задачи

1. Соберете топологию CLOS, как на схеме:
2. Распределите адресное пространство для Underlay сети
3. Зафиксируете в документации план работ, адресное пространство, схему сети, настройки (если перенесли на оборудование)

### Топология сети

![Топология сети](img/lab_01.png)

### Схема адресов IPv4

План адресов IPv4 для линков Spline-Leaf составлен по схеме `10.a.b.c/30`, где

- a - номер DC/POD,
- b - номер Spine,
- c - по очереди для подсети /30.

Адреса loopback `192.168.x.y/32`, где

- z - 1 для Spine, 0 - для Leaf,
- y - номер spine или leaf по порядку

Адреса для клиентов - `172.16.x.y/24`, где

- x - номер Leaf,
- y - порядковый адрес хоста. Все Leaf имеют адрес `.1`

### Схема адресов IPv6

План адресов IPv6 для линков Spline-Leaf составлен по схеме `fdff:w:x:y:z::/127`, где

- w - номер DC,
- x - номер POD,
- y - номер Spine
- z - номер Leaf

Адреса loopback `fdfd:w:x:y:z::/128`, где

- w - номер DC,
- x - номер POD,
- y - 1 для Spine, 0 - для Leaf,
- z - номер Spine или Leaf по порядку

Адреса для клиентов - `fd:x:y::z/64`, где

- x - номер DC,
- y - номер Leaf
- z - порядковый адрес хоста. Все Leaf имеют адрес `.1`

#### Итоговая таблица адресов Spine & Leaf

| Device | Interface | IP Address       | iPv6 address          |
| ------ | --------- | ---------------- | --------------------- |
| S01    | Lo0       | `192.168.1.1/32` | `fdfd:1:1:1:1::/128`  |
|        | Eth1      | `10.1.1.1/30`    | `fdff:1:1:1:1::/127`  |
|        | Eth2      | `10.1.1.5/30`    | `fdff:1:1:1:2::/127`  |
|        | Eth3      | `10.1.1.9/30`    | `fdff:1:1:1:3::/127`  |
|        | Eth4      | `10.1.1.13/30`   | `fdff:1:1:1:4::/127`  |
| ------ | --------- | --------------   | ------------------    |
| S02    | Lo0       | `192.168.1.2/32` | `fdfd:1:1:1:2::/128`  |
|        | Eth1      | `10.1.2.1/30`    | `fdff:1:1:2:1::/127`  |
|        | Eth2      | `10.1.2.5/30`    | `fdff:1:1:2:2::/127`  |
|        | Eth3      | `10.1.2.9/30`    | `fdff:1:1:2:3::/127`  |
|        | Eth4      | `10.1.2.13/30`   | `fdff:1:1:2:4::/127`  |
| ------ | --------- | --------------   | ------------------    |
| L01    | Lo0       | `192.168.0.1/32` | `fdfd:1:1:0:1::/128`  |
|        | Eth1      | `10.1.1.2/30`    | `fdff:1:1:1:1::1/127` |
|        | Eth2      | `10.1.2.2/30`    | `fdff:1:1:2:1::1/127` |
|        | Eth8      | `172.16.1.1/24`  | `fd:1:1::1/64`        |
| ------ | --------- | --------------   | ------------------    |
| L02    | Lo0       | `192.168.0.2/32` | `fdfd:1:1:0:2::/128`  |
|        | Eth1      | `10.1.1.6/30`    | `fdff:1:1:1:2::1/127` |
|        | Eth2      | `10.1.2.6/30`    | `fdff:1:1:2:2::1/127` |
|        | Eth8      | `172.16.2.1/24`  | `fd:1:2::1/64`        |
| ------ | --------- | --------------   | ------------------    |
| L03    | Lo0       | `192.168.0.3/32` | `fdfd:1:1:0:3::/128`  |
|        | Eth1      | `10.1.1.10/30`   | `fdff:1:1:1:3::1/127` |
|        | Eth2      | `10.1.2.10/30`   | `fdff:1:1:2:3::1/127` |
|        | Eth8      | `172.16.3.1/24`  | `fd:1:3::1/64`        |
| ------ | --------- | --------------   | ------------------    |
| L04    | Lo0       | `192.168.0.4/32` | `fdfd:1:1:0:4::/128`  |
|        | Eth1      | `10.1.1.14/30`   | `fdff:1:1:1:4::1/127` |
|        | Eth2      | `10.1.2.14/30`   | `fdff:1:1:2:4::1/127` |
|        | Eth8      | `172.16.4.1/24`  | `fd:1:4::1/64`        |

#### Таблица адресов клиентов

| Device  | Interface | IP Address      | Gateway      | IPv6 Address   | IPv6 Gateway |
| ------- | --------- | --------------- | ------------ | -------------- | ------------ |
| Linux_1 | e0        | `172.16.1.2/24` | `172.16.1.1` | `fd:1:1::2/64` | `fd:1:1::1`  |
| Linux_2 | e0        | `172.16.2.2/24` | `172.16.2.1` | `fd:1:2::2/64` | `fd:1:2::1`  |
| Linux_3 | e0        | `172.16.3.2/24` | `172.16.3.1` | `fd:1:3::2/64` | `fd:1:3::1`  |
| Linux_4 | e0        | `172.16.4.2/24` | `172.16.4.1` | `fd:1:4::2/64` | `fd:1:4::1`  |
